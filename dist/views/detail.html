<!DOCTYPE html>
<html lang="th">
  <head>
    <meta charset="UTF-8" />
    <title>รายละเอียดเกม - GameStore</title>
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css"
      rel="stylesheet"
    />
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css"
      rel="stylesheet"
    />
    <style>
      body {
        background-color: #f8f9fa;
        font-family: "Segoe UI", sans-serif;
      }

      .navbar {
        background-color: #ff6600;
      }

      .navbar .nav-link,
      .navbar .navbar-brand {
        color: white !important;
        font-weight: bold;
      }

      .detail-section {
        background-color: white;
        border-radius: 10px;
        padding: 30px;
        box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);
        margin-top: 30px;
      }

      .game-image {
        width: 100%;
        height: 100%;
        min-height: 400px;
        background-color: #e9ecef;
        border-radius: 10px;
        object-fit: cover;
      }

      .action-buttons {
        margin-top: 20px;
      }
    </style>
  </head>
  <body>
    <!-- Navbar -->
    <nav class="navbar navbar-expand-lg px-4">
      <a class="navbar-brand" href="#">LOGO</a>
      <div class="collapse navbar-collapse">
        <ul class="navbar-nav me-auto">
          <li class="nav-item">
            <a class="nav-link" href="dashboard.html">หน้าแรก</a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="#">ประวัติการทำธุรกรรมที่ผ่านมา</a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="#">โค้ดส่วนลด</a>
          </li>
        </ul>
        <ul class="navbar-nav">
          <li class="nav-item">
            <a class="btn btn-sm btn-danger" href="login.html">LOG OUT</a>
          </li>
        </ul>
      </div>
    </nav>

    <div class="container">
      <div class="detail-section row align-items-stretch">
        <!-- รูปภาพเกม -->
        <div class="col-md-5">
          <img src="" alt="" class="game-image" />
        </div>

        <!-- ข้อมูลเกม -->
        <div class="col-md-7">
          <h3></h3>
          <p class="mt-3"></p>
          <p><strong>วันวางจำหน่าย:</strong></p>
          <p><strong>จำนวนที่เหลือ:</strong></p>
          <p><strong>ประเภท:</strong></p>
          <p><strong>ราคา:</strong></p>

          <!-- ปุ่มสำหรับผู้ใช้ทั่วไป -->
          <div
            id="userActions"
            class="action-buttons d-flex gap-2 justify-content-end"
            style="display: none"
          >
            <button class="btn btn-primary">
              <i class="bi bi-cart-plus"></i> เพิ่มไปยังรถเข็น
            </button>
            <button class="btn btn-success">
              <i class="bi bi-credit-card"></i> ซื้อทันที
            </button>
          </div>

          <!-- ปุ่มสำหรับผู้ดูแลระบบ -->
          <div
            id="adminActions"
            class="action-buttons d-flex gap-2 justify-content-end"
            style="display: none"
          >
            <a href="edit-game.html" class="btn btn-warning">
              <i class="bi bi-pencil-square"></i> แก้ไข
            </a>
            <button class="btn btn-outline-danger" onclick="confirmDelete()">
              <i class="bi bi-trash"></i> ลบ
            </button>
          </div>
        </div>
      </div>
    </div>

    <script>
      const games = {
        fc26: {
          title: "EA SPORTS FC™ 26 ULTIMATE EDITION",
          description: `ครอบคลุมที่สุดกับประสบการณ์การเล่น EA SPORTS FC™ 26
          ด้วยฟีเจอร์ใหม่และเนื้อหาที่อัปเดตล่าสุด
          พร้อมให้คุณสัมผัสกับความตื่นเต้นของการแข่งขันฟุตบอลระดับโลกอย่างแท้จริง
          เนื้อหานี้คือเวอร์ชัน ULTIMATE EDITION
          ซึ่งรวมถึงโบนัสพิเศษและสิทธิพิเศษต่างๆ
          สำหรับผู้เล่นที่ต้องการประสบการณ์ที่ดีที่สุด`,
          releaseDate: "26 กันยายน 2025",
          stock: 4,
          genre: "กีฬา / ฟุตบอล",
          price: 1999,
          image: "/assets/fc26.jpg",
        },
        battlefield: {
          title: "Battlefield 2042",
          description:
            "เกมยิงสุดมันส์ในสนามรบแห่งอนาคต พร้อมโหมดผู้เล่นหลายคนที่เข้มข้น",
          releaseDate: "15 พฤศจิกายน 2023",
          stock: 12,
          genre: "ยิง / แอคชั่น",
          price: 1050,
          image: "/assets/battlefield.jpg",
        },
      };

      const params = new URLSearchParams(window.location.search);
      const gameId = params.get("id");
      const game = games[gameId];

      if (!game) {
        alert("ไม่พบข้อมูลเกมนี้");
        window.location.href = "dashboard.html";
      }

      // อัปเดตข้อมูลในหน้า
      document.querySelector(".game-image").src = game.image;
      document.querySelector(".game-image").alt = game.title;
      document.querySelector("h3").textContent = game.title;
      document.querySelector(".mt-3").textContent = game.description;
      document.querySelector(
        "p:nth-of-type(1)"
      ).innerHTML = `<strong>วันวางจำหน่าย:</strong> ${game.releaseDate}`;
      document.querySelector(
        "p:nth-of-type(2)"
      ).innerHTML = `<strong>จำนวนที่เหลือ:</strong> ${game.stock} ชิ้น`;
      document.querySelector(
        "p:nth-of-type(3)"
      ).innerHTML = `<strong>ประเภท:</strong> ${game.genre}`;
      document.querySelector(
        "p:nth-of-type(4)"
      ).innerHTML = `<strong>ราคา:</strong> ฿${game.price.toFixed(2)}`;

      // แสดงปุ่มตาม role
      const user = JSON.parse(localStorage.getItem("user"));
      if (user && user.role === "admin") {
        document.getElementById("adminActions").style.display = "flex";
        document.getElementById("userActions").remove();
      } else {
        document.getElementById("userActions").style.display = "flex";
        document.getElementById("adminActions").remove();
      }

      function confirmDelete() {
        if (confirm("คุณแน่ใจว่าต้องการลบเกมนี้ใช่หรือไม่?")) {
          alert("✅ ลบเกมเรียบร้อยแล้ว");
          window.location.href = "dashboard.html";
        }
      }
    </script>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
  </body>
</html>
